<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Mental - Design Patterns (23 Padr√µes GoF)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --tertiary: #e74c3c;
            --accent: #9b59b6;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --gray: #6c757d;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            /* Light theme (default) */
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #333333;
            --header-bg: #ffffff;
            --border-color: #e9ecef;
        }

        .dark-theme {
            --bg-color: #1a1d23;
            --card-bg: #2d3748;
            --text-color: #e2e8f0;
            --header-bg: #2d3748;
            --border-color: #4a5568;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--bg-color);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-color);
            transition: var(--transition);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        header {
            text-align: center;
            padding: 25px;
            background: var(--header-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 10px;
            position: relative;
            border: 1px solid var(--border-color);
        }

        h1 {
            color: var(--text-color);
            margin-bottom: 10px;
            font-size: 2.2rem;
        }

        .subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            width: 60px;
            height: 30px;
            display: flex;
            align-items: center;
            padding: 0 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            transition: var(--transition);
            transform: translateX(0);
        }

        .dark-theme .theme-toggle::before {
            transform: translateX(30px);
        }

        .theme-icon {
            font-size: 0.8rem;
            z-index: 1;
        }

        .theme-icon.sun {
            color: #f39c12;
            margin-right: auto;
        }

        .theme-icon.moon {
            color: #f1c40f;
            margin-left: auto;
        }

        .content {
            display: flex;
            gap: 25px;
            min-height: 75vh;
        }

        /* Sidebar de categorias */
        .categories-sidebar {
            flex: 0.3;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            max-height: 75vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
        }

        .category-title {
            font-size: 1.2rem;
            color: var(--text-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .category-item {
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid transparent;
        }

        .category-item:hover {
            transform: translateX(5px);
            border-color: var(--primary);
        }

        .category-item.creational {
            background-color: rgba(52, 152, 219, 0.1);
            border-left: 4px solid var(--primary);
        }

        .category-item.structural {
            background-color: rgba(46, 204, 113, 0.1);
            border-left: 4px solid var(--secondary);
        }

        .category-item.behavioral {
            background-color: rgba(231, 76, 60, 0.1);
            border-left: 4px solid var(--tertiary);
        }

        .category-item.active {
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            background-color: rgba(155, 89, 182, 0.15);
            border-color: var(--accent);
        }

        .category-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
        }

        .creational .category-icon {
            background-color: var(--primary);
        }

        .structural .category-icon {
            background-color: var(--secondary);
        }

        .behavioral .category-icon {
            background-color: var(--tertiary);
        }

        /* √Årea de padr√µes */
        .patterns-area {
            flex: 0.7;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
            display: flex;
            flex-direction: column;
            max-height: 75vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
        }

        .patterns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .pattern-card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            text-align: center;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
        }

        .pattern-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border-color: var(--accent);
        }

        .pattern-card.active {
            border-color: var(--accent);
            background-color: rgba(155, 89, 182, 0.1);
        }

        .pattern-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .pattern-name {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 5px;
        }

        .pattern-category {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border: 1px solid var(--border-color);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            background: none;
            border: none;
            font-size: 2rem;
        }

        .close-modal:hover {
            color: var(--tertiary);
            transform: rotate(90deg);
        }

        .modal-header {
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .pattern-name-large {
            font-size: 2rem;
            color: var(--text-color);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pattern-icon-large {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .pattern-category-badge {
            font-size: 1rem;
            color: var(--gray);
            background: var(--light);
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
            background-color: rgba(155, 89, 182, 0.1);
            color: var(--accent);
            font-weight: 600;
        }

        .explanation-content {
            flex: 1;
        }

        .explanation-section {
            margin-bottom: 25px;
            padding: 15px;
            background: var(--light);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary);
            background-color: rgba(52, 152, 219, 0.05);
        }

        .section-title {
            font-size: 1.2rem;
            color: var(--text-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .section-title i {
            margin-right: 8px;
            color: var(--primary);
        }

        .section-content {
            line-height: 1.6;
            color: var(--text-color);
        }

        .analogy {
            background: rgba(52, 152, 219, 0.1);
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            border-left: 3px solid var(--primary);
        }

        .analogy-title {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 5px;
        }

        .diagram-container {
            margin: 20px 0;
            padding: 15px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            text-align: center;
            overflow-x: auto;
        }

        .diagram-container img {
            max-width: 100%;
            height: auto;
        }

        .diagram-loading {
            color: var(--gray);
            padding: 20px;
            font-style: italic;
        }

        .no-selection {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            color: var(--gray);
            text-align: center;
            padding: 20px;
        }

        .no-selection-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .instructions {
            text-align: center;
            color: var(--gray);
            font-style: italic;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: var(--light);
            border-radius: var(--border-radius);
            background-color: rgba(155, 89, 182, 0.05);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        @media (max-width: 1024px) {
            .content {
                flex-direction: column;
            }
            
            .categories-sidebar, .patterns-area {
                min-height: 300px;
                max-height: 400px;
            }
        }

        @media (max-width: 768px) {
            .patterns-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .pattern-name-large {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mapa Mental de Design Patterns</h1>
            <p class="subtitle">Explore os 23 padr√µes de projeto GoF organizados por categoria. Cada padr√£o inclui explica√ß√µes did√°ticas, problemas que resolve, solu√ß√µes, diagramas UML e analogias do mundo real.</p>
            <div class="theme-toggle" id="theme-toggle">
                <i class="theme-icon sun fas fa-sun"></i>
                <i class="theme-icon moon fas fa-moon"></i>
            </div>
        </header>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value">5</div>
                <div class="stat-label">Padr√µes Criacionais</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">7</div>
                <div class="stat-label">Padr√µes Estruturais</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">11</div>
                <div class="stat-label">Padr√µes Comportamentais</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">23</div>
                <div class="stat-label">Total de Padr√µes</div>
            </div>
        </div>
        
        <div class="content">
            <!-- Sidebar de categorias -->
            <div class="categories-sidebar">
                <h2 class="category-title">Categorias</h2>
                <div class="category-item creational active" data-category="creational">
                    <div class="category-icon">C</div>
                    <span>Padr√µes Criacionais</span>
                </div>
                <div class="category-item structural" data-category="structural">
                    <div class="category-icon">E</div>
                    <span>Padr√µes Estruturais</span>
                </div>
                <div class="category-item behavioral" data-category="behavioral">
                    <div class="category-icon">B</div>
                    <span>Padr√µes Comportamentais</span>
                </div>
            </div>
            
            <!-- √Årea de padr√µes -->
            <div class="patterns-area">
                <h2 class="category-title">Padr√µes <span id="current-category">Criacionais</span></h2>
                <div class="patterns-grid" id="patterns-container">
                    <!-- Os padr√µes ser√£o inseridos aqui via JavaScript -->
                </div>
            </div>
        </div>
        
        <p class="instructions">Navegue pelas categorias e clique nos padr√µes para explorar suas funcionalidades, problemas que resolvem e diagramas UML</p>
    </div>

    <!-- Modal para explica√ß√µes -->
    <div class="modal" id="pattern-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal">&times;</button>
            <div class="modal-header">
                <h2 class="pattern-name-large">
                    <span class="pattern-icon-large" id="modal-icon">üè≠</span>
                    <span id="modal-title">Abstract Factory</span>
                </h2>
                <span class="pattern-category-badge" id="modal-category">Padr√£o Criacional</span>
            </div>
            <div class="explanation-content" id="modal-content">
                <!-- Conte√∫do ser√° preenchido via JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para codificar PlantUML para URL do servidor (algoritmo PlantUML)
        function encodePlantUML(text) {
            // Remove @startuml e @enduml se existirem
            text = text.replace(/@startuml\s*/g, '').replace(/@enduml\s*/g, '').trim();
            
            // Fun√ß√£o para codificar 6 bits
            const encode6bit = (b) => {
                if (b < 10) return String.fromCharCode(48 + b); // 0-9
                b -= 10;
                if (b < 26) return String.fromCharCode(65 + b); // A-Z
                b -= 26;
                if (b < 26) return String.fromCharCode(97 + b); // a-z
                b -= 26;
                if (b === 0) return '-';
                if (b === 1) return '_';
                return '?';
            };
            
            // Compress√£o usando pako (deflate)
            const compressed = pako.deflate(text, { level: 9 });
            
            // Converte para base64 usando o algoritmo PlantUML
            let base64 = '';
            for (let i = 0; i < compressed.length; i += 3) {
                const b1 = compressed[i] || 0;
                const b2 = compressed[i + 1] || 0;
                const b3 = compressed[i + 2] || 0;
                
                const bitmap = (b1 << 16) | (b2 << 8) | b3;
                
                base64 += encode6bit((bitmap >> 18) & 63);
                base64 += encode6bit((bitmap >> 12) & 63);
                base64 += encode6bit((bitmap >> 6) & 63);
                base64 += encode6bit(bitmap & 63);
            }
            
            return base64;
        }

        // Fun√ß√£o para renderizar diagrama PlantUML
        function renderPlantUML(plantumlCode, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '<div class="diagram-loading">Carregando diagrama...</div>';
            
            try {
                // Limpa o c√≥digo PlantUML
                let cleanCode = plantumlCode.trim();
                if (!cleanCode.startsWith('@startuml')) {
                    cleanCode = '@startuml\n' + cleanCode;
                }
                if (!cleanCode.endsWith('@enduml')) {
                    cleanCode = cleanCode + '\n@enduml';
                }
                
                // Codifica o PlantUML
                const encoded = encodePlantUML(cleanCode);
                
                // Usa o servidor PlantUML online
                const url = `https://www.plantuml.com/plantuml/svg/${encoded}`;
                
                const img = document.createElement('img');
                img.src = url;
                img.alt = 'Diagrama UML';
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                img.onload = () => {
                    container.innerHTML = '';
                    container.appendChild(img);
                };
                img.onerror = () => {
                    // Fallback: tentar com PNG
                    const pngUrl = `https://www.plantuml.com/plantuml/png/${encoded}`;
                    const imgPng = document.createElement('img');
                    imgPng.src = pngUrl;
                    imgPng.alt = 'Diagrama UML';
                    imgPng.style.maxWidth = '100%';
                    imgPng.style.height = 'auto';
                    imgPng.onload = () => {
                        container.innerHTML = '';
                        container.appendChild(imgPng);
                    };
                    imgPng.onerror = () => {
                        container.innerHTML = '<div class="diagram-loading">Erro ao carregar diagrama. Verifique sua conex√£o com a internet.</div>';
                    };
                };
            } catch (error) {
                container.innerHTML = '<div class="diagram-loading">Erro ao processar diagrama: ' + error.message + '</div>';
            }
        }

        // Dados completos dos 23 padr√µes de projeto
        const patternsData = {
            creational: [
                { 
                    name: "Abstract Factory", 
                    icon: "üè≠",
                    problem: "Como criar fam√≠lias de objetos relacionados sem especificar suas classes concretas?",
                    solution: "Fornece uma interface para criar fam√≠lias de objetos relacionados ou dependentes sem especificar suas classes concretas. O padr√£o permite que o sistema seja independente de como seus objetos s√£o criados, compostos e representados.",
                    analogy: {
                        title: "F√°brica de M√≥veis",
                        description: "Imagine uma f√°brica de m√≥veis que produz conjuntos completos (mesa, cadeiras, arm√°rio) em diferentes estilos (moderno, r√∫stico, cl√°ssico). O cliente pede um conjunto 'moderno' e recebe todos os m√≥veis nesse estilo, sem precisar saber como cada pe√ßa foi fabricada."
                    },
                    structure: "AbstractFactory (interface), ConcreteFactory (implementa√ß√£o), AbstractProduct (interface do produto), ConcreteProduct (produto real), Client (usa as interfaces).",
                    scenario: "Sistema de UI que precisa ser compat√≠vel com diferentes temas (claro/escuro) em m√∫ltiplos sistemas operacionais.",
                    benefits: "Isola classes concretas, facilita a troca de fam√≠lias de produtos, promove a consist√™ncia entre produtos.",
                    diagram: `@startuml
package "Products" {
  interface Button {
    +render(): string
    +onClick(): void
  }
  interface Checkbox {
    +render(): string
    +toggle(): boolean
  }

  class LightButton
  class DarkButton
  class LightCheckbox
  class DarkCheckbox

  Button <|.. LightButton
  Button <|.. DarkButton
  Checkbox <|.. LightCheckbox
  Checkbox <|.. DarkCheckbox
}

package "Factory" {
  interface GUIFactory {
    +createButton(): Button
    +createCheckbox(): Checkbox
  }

  class LightFactory
  class DarkFactory

  GUIFactory <|.. LightFactory
  GUIFactory <|.. DarkFactory
  LightFactory --> LightButton
  LightFactory --> LightCheckbox
  DarkFactory --> DarkButton
  DarkFactory --> DarkCheckbox
}

package "Client" {
  class Application {
    -factory: GUIFactory
    +constructor(factory: GUIFactory)
    +renderUI(): string
  }
  Application --> GUIFactory
  Application --> Button
  Application --> Checkbox
}
@enduml`
                },
                { 
                    name: "Builder", 
                    icon: "üî®",
                    problem: "Como criar objetos complexos passo a passo, permitindo diferentes representa√ß√µes?",
                    solution: "Separa a constru√ß√£o de um objeto complexo de sua representa√ß√£o, permitindo o mesmo processo de constru√ß√£o criar diferentes representa√ß√µes. O padr√£o encapsula a cria√ß√£o e montagem de um produto complexo em um objeto Builder separado.",
                    analogy: {
                        title: "Montagem de um Computador",
                        description: "Ao montar um computador, voc√™ escolhe componentes espec√≠ficos (processador, mem√≥ria, placa de v√≠deo) seguindo um processo padr√£o, mas o resultado final pode variar muito (PC para games, para escrit√≥rio, servidor)."
                    },
                    structure: "Builder (interface), ConcreteBuilder (implementa√ß√£o), Director (controla constru√ß√£o), Product (objeto complexo).",
                    scenario: "Cria√ß√£o de relat√≥rios complexos com diferentes formatos (HTML, PDF, texto) mas com o mesmo conte√∫do.",
                    benefits: "Permite variar a representa√ß√£o interna de um produto, isola o c√≥digo de constru√ß√£o e representa√ß√£o, oferece controle refinado sobre o processo de constru√ß√£o.",
                    diagram: `@startuml
package "Product" {
  class BasicPizza {
    +size: PizzaSize
    +cheese: boolean
    +pepperoni: boolean
    +bacon: boolean
    +extraSauce: boolean
    +toString(): string
  }
  enum PizzaSize { SMALL; MEDIUM; LARGE }
}

package "Builder" {
  interface PizzaBuilder {
    +reset(): PizzaBuilder
    +size(size: PizzaSize): PizzaBuilder
    +withCheese(): PizzaBuilder
    +withPepperoni(): PizzaBuilder
    +withBacon(): PizzaBuilder
    +withExtraSauce(): PizzaBuilder
    +build(): BasicPizza
  }
  class ClassicPizzaBuilder
  PizzaBuilder <|.. ClassicPizzaBuilder
}

package "Director" {
  class PizzaDirector {
    -builder: PizzaBuilder
    +makeMargherita(): BasicPizza
    +makePepperoniLarge(): BasicPizza
    +makeBaconDeluxe(): BasicPizza
  }
  PizzaDirector --> PizzaBuilder
}
@enduml`
                },
                { 
                    name: "Factory Method", 
                    icon: "üèóÔ∏è",
                    problem: "Como delegar a cria√ß√£o de objetos para subclasses?",
                    solution: "Define uma interface para criar um objeto, mas deixa as subclasses decidirem qual classe instanciar. O Factory Method permite que uma classe adie a instancia√ß√£o para subclasses, promovendo o baixo acoplamento.",
                    analogy: {
                        title: "Contrata√ß√£o de Funcion√°rios",
                        description: "Uma empresa tem um processo padr√£o de contrata√ß√£o, mas cada departamento (TI, Marketing, Vendas) contrata tipos espec√≠ficos de profissionais com habilidades especializadas."
                    },
                    structure: "Product (interface), ConcreteProduct (implementa√ß√£o), Creator (factory method), ConcreteCreator (implementa factory method).",
                    scenario: "Framework de aplica√ß√µes que precisa criar objetos de UI espec√≠ficos para cada plataforma (Windows, Mac, Linux).",
                    benefits: "Elimina a necessidade de amarrar c√≥digo a classes espec√≠ficas, encoraja o baixo acoplamento, facilita a extensibilidade.",
                    diagram: `@startuml
package "Product" {
  interface Transport {
    +load(weightKg: number): void
    +deliver(): string
  }

  class Truck
  class Ship

  Transport <|.. Truck
  Transport <|.. Ship
}

package "Creator" {
  abstract class Logistics {
    +createTransport(): Transport
  }

  class RoadLogistics
  class SeaLogistics

  Logistics <|-- RoadLogistics
  Logistics <|-- SeaLogistics
  RoadLogistics --> Truck
  SeaLogistics --> Ship
}
@enduml`
                },
                { 
                    name: "Prototype", 
                    icon: "üìã",
                    problem: "Como criar novos objetos copiando inst√¢ncias existentes?",
                    solution: "Especifica os tipos de objetos a criar usando uma inst√¢ncia protot√≠pica e cria novos objetos copiando este prot√≥tipo. Permite adicionar e remover objetos em tempo de execu√ß√£o.",
                    analogy: {
                        title: "Fotoc√≥pia de Documentos",
                        description: "Em vez de redigitar um documento completo, voc√™ faz uma c√≥pia do original e modifica apenas as partes necess√°rias, economizando tempo e esfor√ßo."
                    },
                    structure: "Prototype (interface de clonagem), ConcretePrototype (implementa clonagem), Client (solicita clones).",
                    scenario: "Editor gr√°fico onde usu√°rios duplicam elementos complexos (com v√°rias camadas e efeitos) e fazem modifica√ß√µes menores.",
                    benefits: "Adiciona e remove objetos em tempo de execu√ß√£o, especifica novos objetos variando valores, especifica novos objetos variando estrutura.",
                    diagram: `@startuml
interface Prototype { +clone() }
abstract class Shape { +x; +y; +color; +area(); +clone() }
class Circle { +radius }

Prototype <|.. Shape
Shape <|-- Circle
@enduml`
                },
                { 
                    name: "Singleton", 
                    icon: "üëë",
                    problem: "Como garantir que uma classe tenha apenas uma inst√¢ncia e fornecer acesso global a ela?",
                    solution: "Garante que uma classe tenha apenas uma inst√¢ncia e fornece um ponto de acesso global a ela. O padr√£o controla a cria√ß√£o da inst√¢ncia, garantindo que apenas uma seja criada, e fornece um m√©todo para acess√°-la.",
                    analogy: {
                        title: "Presidente de uma Empresa",
                        description: "Uma empresa tem apenas um presidente, que √© acess√≠vel por todos os departamentos quando necess√°rio. N√£o faz sentido ter m√∫ltiplos presidentes tomando decis√µes conflitantes."
                    },
                    structure: "Singleton (classe com m√©todo getInstance() que controla a √∫nica inst√¢ncia).",
                    scenario: "Gerenciador de configura√ß√µes de uma aplica√ß√£o que precisa ser acessado por v√°rios m√≥dulos diferentes.",
                    benefits: "Acesso controlado √† inst√¢ncia √∫nica, reduz a necessidade de vari√°veis globais, permite refinamento de opera√ß√µes e representa√ß√£o.",
                    diagram: `@startuml
class Logger {
  -instance: Logger
  -logs: string[]
  -Logger()
  +getInstance(): Logger
  +info(message: string): void
  +error(message: string): void
  +getLogs(): string[]
}
@enduml`
                }
            ],
            structural: [
                { 
                    name: "Adapter", 
                    icon: "üîå",
                    problem: "Como fazer interfaces incompat√≠veis trabalharem juntas?",
                    solution: "Converte a interface de uma classe em outra interface esperada pelos clientes. O Adapter permite que classes com interfaces incompat√≠veis trabalhem juntas, atuando como um intermedi√°rio.",
                    analogy: {
                        title: "Adaptador de Tomada",
                        description: "Quando voc√™ viaja para outro pa√≠s e precisa conectar seu dispositivo em uma tomada com formato diferente, usa um adaptador que faz a 'tradu√ß√£o' entre os dois padr√µes."
                    },
                    structure: "Target (interface esperada), Adaptee (interface existente), Adapter (adapta Adaptee para Target).",
                    scenario: "Integra√ß√£o com biblioteca de terceiros que possui interface diferente da esperada pelo seu sistema.",
                    benefits: "Permite a reutiliza√ß√£o de classes existentes, permite que classes com interfaces incompat√≠veis cooperem.",
                    diagram: `@startuml
interface PaymentProcessor {
  +pay(amountCents: number): string
}

class LegacyGateway {
  +processarPagamento(valorReais: number): boolean
}

class LegacyGatewayAdapter {
  +pay(amountCents: number): string
}

PaymentProcessor <|.. LegacyGatewayAdapter
LegacyGatewayAdapter --> LegacyGateway

class Application {
  -processor: PaymentProcessor
  +checkout(amountCents: number): string
}
Application --> PaymentProcessor
@enduml`
                },
                { 
                    name: "Bridge", 
                    icon: "üåâ",
                    problem: "Como desacoplar uma abstra√ß√£o de sua implementa√ß√£o?",
                    solution: "Desacopla uma abstra√ß√£o de sua implementa√ß√£o, de modo que as duas possam variar independentemente. Usa composi√ß√£o em vez de heran√ßa para compartilhar implementa√ß√µes entre diferentes abstra√ß√µes.",
                    analogy: {
                        title: "Controle Remoto e Dispositivos",
                        description: "Um controle remoto universal (abstra√ß√£o) pode controlar diferentes dispositivos (TV, som, ar-condicionado) sem precisar ser reescrito para cada um. Voc√™ pode mudar o dispositivo sem alterar o controle."
                    },
                    structure: "Abstraction (interface), RefinedAbstraction (implementa√ß√£o estendida), Implementor (interface de implementa√ß√£o), ConcreteImplementor (implementa√ß√£o concreta).",
                    scenario: "Sistema de renderiza√ß√£o gr√°fica que funciona com diferentes APIs (OpenGL, DirectX, Vulkan).",
                    benefits: "Separa√ß√£o entre interface e implementa√ß√£o, melhora a extensibilidade, oculta detalhes de implementa√ß√£o do cliente.",
                    diagram: `@startuml
interface Device { +isEnabled(); +enable(); +disable(); +getVolume(); +setVolume() }
class TV
class Remote { +togglePower(); +volumeUp(); +volumeDown() }
class AdvancedRemote { +mute() }

Device <|.. TV
Remote o--> Device
AdvancedRemote --|> Remote
@enduml`
                },
                { 
                    name: "Composite", 
                    icon: "üå≥",
                    problem: "Como tratar objetos individuais e composi√ß√µes de objetos uniformemente?",
                    solution: "Compor objetos em estruturas de √°rvore para representar hierarquias parte-todo. Composite permite que os clientes tratem objetos individuais e composi√ß√µes de objetos de forma uniforme.",
                    analogy: {
                        title: "Estrutura de Diret√≥rios",
                        description: "No sistema de arquivos, tanto arquivos individuais quanto pastas (que cont√™m outros arquivos/pastas) podem ser movidos, copiados ou exclu√≠dos da mesma maneira."
                    },
                    structure: "Component (interface comum), Leaf (objeto individual), Composite (cont√©m componentes filhos).",
                    scenario: "Sistema de menus com submenus aninhados, onde cada item de menu pode ser tratado da mesma forma.",
                    benefits: "Define hierarquias de objetos parte-todo, simplifica o c√≥digo cliente, facilita a adi√ß√£o de novos tipos de componentes.",
                    diagram: `@startuml
interface FSNode { +name: string; +size(): number }
class FileNode
class FolderNode { +add(node: FSNode): void }

FSNode <|.. FileNode
FSNode <|.. FolderNode
FolderNode o--> FSNode
@enduml`
                },
                { 
                    name: "Decorator", 
                    icon: "üé®",
                    problem: "Como adicionar responsabilidades a objetos dinamicamente?",
                    solution: "Anexa responsabilidades adicionais a um objeto dinamicamente. Os decoradores fornecem uma alternativa flex√≠vel √† subclasse para extens√£o de funcionalidade.",
                    analogy: {
                        title: "Personaliza√ß√£o de um Caf√©",
                        description: "Voc√™ pede um caf√© b√°sico e vai adicionando extras (leite, chantilly, caramelo) conforme deseja, sem modificar a receita original do caf√©."
                    },
                    structure: "Component (interface), ConcreteComponent (objeto base), Decorator (mant√©m refer√™ncia a Component), ConcreteDecorator (adiciona funcionalidades).",
                    scenario: "Sistema de notifica√ß√µes onde voc√™ pode adicionar diferentes canais (email, SMS, push) a uma notifica√ß√£o b√°sica.",
                    benefits: "Mais flex√≠vel que heran√ßa, evita classes sobrecarregadas de funcionalidades, permite adicionar e remover responsabilidades dinamicamente.",
                    diagram: `@startuml
interface Coffee { +cost(): number; +description(): string }
class SimpleCoffee
abstract class CoffeeDecorator
class MilkDecorator
class SugarDecorator

Coffee <|.. SimpleCoffee
Coffee <|.. CoffeeDecorator
CoffeeDecorator <|-- MilkDecorator
CoffeeDecorator <|-- SugarDecorator
CoffeeDecorator o--> Coffee
@enduml`
                },
                { 
                    name: "Facade", 
                    icon: "üè¢",
                    problem: "Como fornecer uma interface simples para um subsistema complexo?",
                    solution: "Fornece uma interface unificada para um conjunto de interfaces em um subsistema. A Facade define uma interface de n√≠vel mais alto que torna o subsistema mais f√°cil de usar.",
                    analogy: {
                        title: "Receptionista de Hotel",
                        description: "Em vez de lidar separadamente com reservas, restaurante, limpeza e manuten√ß√£o, os h√≥spedes falam apenas com o receptionista, que coordena todos os servi√ßos internos."
                    },
                    structure: "Facade (interface simplificada), classes do subsistema (implementam funcionalidade complexa).",
                    scenario: "Biblioteca complexa de processamento de v√≠deo com uma interface simples para opera√ß√µes comuns.",
                    benefits: "Isola clientes dos componentes do subsistema, promove o baixo acoplamento, simplifica a interface com o subsistema.",
                    diagram: `@startuml
class NotificationFacade {
  +sendWelcome(user): string[]
}

class EmailService { +send(to, subject, body): string }
class SmsService { +send(to, text): string }
class PushService { +send(deviceId, title, message): string }

NotificationFacade --> EmailService
NotificationFacade --> SmsService
NotificationFacade --> PushService
@enduml`
                },
                { 
                    name: "Flyweight", 
                    icon: "ü™∂",
                    problem: "Como suportar grandes quantidades de objetos de forma eficiente?",
                    solution: "Usa compartilhamento para suportar grandes quantidades de objetos de granularidade fina de maneira eficiente. Um objeto flyweight pode ser usado em m√∫ltiplos contextos simultaneamente.",
                    analogy: {
                        title: "Biblioteca de Caracteres",
                        description: "Em vez de armazenar cada caractere individualmente com todos seus atributos (fonte, tamanho, cor), o processador armazena os caracteres uma vez e compartilha essa informa√ß√£o, guardando apenas as diferen√ßas (posi√ß√£o na p√°gina)."
                    },
                    structure: "Flyweight (interface), ConcreteFlyweight (objeto compartilh√°vel), FlyweightFactory (gerencia flyweights), Client (usa flyweights).",
                    scenario: "Editor de texto que precisa renderizar milhares de caracteres id√™nticos na tela de forma eficiente.",
                    benefits: "Redu√ß√£o no n√∫mero de objetos, economia de mem√≥ria, objetos compartilhados podem ser usados em m√∫ltiplos contextos.",
                    diagram: `@startuml
class Font { +family; +size }
class FontFactory { +getFont(); +cacheSize() }
class Glyph { +char; +x; +y; +render() }

FontFactory --> Font
Glyph --> Font
@enduml`
                },
                { 
                    name: "Proxy", 
                    icon: "üõ°Ô∏è",
                    problem: "Como controlar o acesso a um objeto?",
                    solution: "Fornece um substituto ou marcador de lugar para outro objeto para controlar o acesso a ele. O Proxy atua como um intermedi√°rio, controlando o acesso ao objeto real.",
                    analogy: {
                        title: "Assistente Pessoal",
                        description: "Um assistente atende liga√ß√µes, filtra solicita√ß√µes e s√≥ repassa ao executivo as chamadas importantes, protegendo-o de interrup√ß√µes desnecess√°rias."
                    },
                    structure: "Proxy (intermedi√°rio), Subject (interface comum), RealSubject (objeto real).",
                    scenario: "Sistema de cache para objetos pesados que s√£o caros para criar ou acessar.",
                    benefits: "Controle de acesso ao objeto real, funcionalidades adicionais sem modificar o objeto real, representa√ß√£o remota de objetos.",
                    diagram: `@startuml
interface Image { +display(): string }
class RealImage { -loaded: boolean }
class ImageProxy { -real: RealImage }

Image <|.. RealImage
Image <|.. ImageProxy
ImageProxy --> RealImage
@enduml`
                }
            ],
            behavioral: [
                { 
                    name: "Chain of Responsibility", 
                    icon: "‚õìÔ∏è",
                    problem: "Como evitar acoplamento entre remetente e receptor de uma solicita√ß√£o?",
                    solution: "Evita acoplar o remetente de uma solicita√ß√£o ao seu receptor, dando a mais de um objeto a chance de tratar a solicita√ß√£o. Encadeia os objetos receptores e passa a solicita√ß√£o ao longo da cadeia at√© que um objeto a trate.",
                    analogy: {
                        title: "Suporte T√©cnico em N√≠veis",
                        description: "Um problema t√©cnico passa por diferentes n√≠veis de suporte (1¬∫, 2¬∫, 3¬∫ n√≠vel). Cada n√≠vel tenta resolver o problema e, se n√£o conseguir, repassa para o pr√≥ximo n√≠vel especializado."
                    },
                    structure: "Handler (interface de tratamento), ConcreteHandler (trata solicita√ß√µes), Client (inicia solicita√ß√£o na cadeia).",
                    scenario: "Sistema de processamento de pedidos onde diferentes departamentos (estoque, financeiro, log√≠stica) validam partes espec√≠ficas do pedido.",
                    benefits: "Reduz o acoplamento, aumenta a flexibilidade na atribui√ß√£o de responsabilidades, permite adicionar ou modificar handlers dinamicamente.",
                    diagram: `@startuml
abstract class Handler { +setNext(); +handle(); #process() }
class L1Handler
class L2Handler
class L3Handler

Handler <|-- L1Handler
Handler <|-- L2Handler
Handler <|-- L3Handler
L1Handler --> Handler : next
L2Handler --> Handler : next
@enduml`
                },
                { 
                    name: "Command", 
                    icon: "üìù",
                    problem: "Como parametrizar objetos com opera√ß√µes e suportar desfazer/refazer?",
                    solution: "Encapsula uma solicita√ß√£o como um objeto, permitindo parametrizar clientes com diferentes solicita√ß√µes, enfileirar ou registrar solicita√ß√µes e suportar opera√ß√µes que podem ser desfeitas.",
                    analogy: {
                        title: "Pedido em um Restaurante",
                        description: "O gar√ßom anota o pedido (comando) e leva para a cozinha, separando quem pediu (cliente) de quem executa (cozinheiro). O pedido pode ser cancelado ou modificado antes de ser preparado."
                    },
                    structure: "Command (interface de execu√ß√£o), ConcreteCommand (implementa a√ß√£o), Invoker (solicita execu√ß√£o), Receiver (executa opera√ß√£o).",
                    scenario: "Editor de texto com funcionalidade de desfazer/refazer onde cada a√ß√£o do usu√°rio √© encapsulada como um comando.",
                    benefits: "Desacopla o objeto que invoca a opera√ß√£o do objeto que a executa, permite enfileirar opera√ß√µes, suporta opera√ß√µes de desfazer.",
                    diagram: `@startuml
interface Command {
  +execute()
  +undo()
}
class SetTextCommand { -prev }
class Editor { +setText(); +getText() }
class CommandHistory { +push(); +pop() }

Command <|.. SetTextCommand
SetTextCommand --> Editor
CommandHistory o--> Command
@enduml`
                },
                { 
                    name: "Interpreter", 
                    icon: "üî§",
                    problem: "Como avaliar senten√ßas em uma linguagem?",
                    solution: "Dada uma linguagem, define uma representa√ß√£o para sua gram√°tica junto com um interpretador que usa a representa√ß√£o para interpretar senten√ßas na linguagem.",
                    analogy: {
                        title: "Tradutor Simult√¢neo",
                        description: "Um tradutor interpreta frases em uma l√≠ngua estrangeira, analisando a gram√°tica e o vocabul√°rio para produzir uma tradu√ß√£o correta na l√≠ngua nativa."
                    },
                    structure: "AbstractExpression (interface interpretar), TerminalExpression (s√≠mbolos terminais), NonterminalExpression (s√≠mbolos n√£o terminais), Context (informa√ß√£o global).",
                    scenario: "Calculadora que processa express√µes matem√°ticas fornecidas como strings.",
                    benefits: "F√°cil altera√ß√£o e extens√£o da gram√°tica, implementa√ß√£o da gram√°tica √© straightforward, f√°cil implementa√ß√£o da linguagem.",
                    diagram: `@startuml
interface Expr { +eval() }
class Var { +name }
class And { +left; +right }
class Or { +left; +right }
class Not { +expr }

Expr <|.. Var
Expr <|.. And
Expr <|.. Or
Expr <|.. Not
@enduml`
                },
                { 
                    name: "Iterator", 
                    icon: "üîç",
                    problem: "Como acessar elementos de uma cole√ß√£o sequencialmente sem expor sua estrutura interna?",
                    solution: "Fornece uma maneira de acessar sequencialmente os elementos de um objeto agregado sem expor sua representa√ß√£o subjacente.",
                    analogy: {
                        title: "Controle de TV",
                        description: "Voc√™ usa o controle para navegar pelos canais (pr√≥ximo, anterior) sem precisar saber como a TV armazena e organiza a lista de canais internamente."
                    },
                    structure: "Iterator (interface de travessia), ConcreteIterator (implementa travessia), Aggregate (interface de cria√ß√£o), ConcreteAggregate (implementa cria√ß√£o).",
                    scenario: "Percorrer elementos de diferentes estruturas de dados (lista, √°rvore, grafo) usando uma interface uniforme.",
                    benefits: "Suporta diferentes formas de travessia, simplifica a interface do agregado, permite m√∫ltiplas travessias simult√¢neas.",
                    diagram: `@startuml
class WordsCollection { +[Symbol.iterator]() }
interface Iterator { +next() }
WordsCollection --> Iterator
@enduml`
                },
                { 
                    name: "Mediator", 
                    icon: "üìû",
                    problem: "Como reduzir acoplamento entre objetos que se comunicam?",
                    solution: "Define um objeto que encapsula como um conjunto de objetos interage. O Mediator promove o acoplamento fraco ao evitar que os objetos se refiram uns aos outros explicitamente, e permite variar suas intera√ß√µes independentemente.",
                    analogy: {
                        title: "Controlador de Tr√°fego A√©reo",
                        description: "Em vez dos avi√µes se comunicarem diretamente (o que causaria caos), todos falam com o controlador de tr√°fego, que coordena os movimentos e evita colis√µes."
                    },
                    structure: "Mediator (interface de comunica√ß√£o), ConcreteMediator (coordena colleagues), Colleague (objetos que se comunicam).",
                    scenario: "Sistema de UI com m√∫ltiplos componentes (bot√µes, campos, listas) que precisam se sincronizar sem refer√™ncias diretas entre si.",
                    benefits: "Reduz o n√∫mero de depend√™ncias entre objetos, centraliza o controle, simplifica a comunica√ß√£o entre objetos.",
                    diagram: `@startuml
interface Mediator { +broadcast() }
class ChatMediator { +register(); +broadcast() }
class User { +name; +inbox; +send(); +receive() }

User --> Mediator
ChatMediator ..> User : callbacks
@enduml`
                },
                { 
                    name: "Memento", 
                    icon: "üíæ",
                    problem: "Como capturar e restaurar o estado interno de um objeto sem violar o encapsulamento?",
                    solution: "Sem violar o encapsulamento, captura e externaliza o estado interno de um objeto, para que o objeto possa ser restaurado para este estado mais tarde.",
                    analogy: {
                        title: "Salvamento de Jogo",
                        description: "Em um videogame, voc√™ pode salvar seu progresso em um ponto espec√≠fico e, se algo der errado, restaurar o jogo exatamente daquele ponto."
                    },
                    structure: "Memento (armazena estado), Originator (cria e usa mementos), Caretaker (guarda mementos).",
                    scenario: "Editor de documentos com funcionalidade de desfazer que precisa restaurar estados anteriores do documento.",
                    benefits: "Preserva os limites de encapsulamento, simplifica o originador, uso potencialmente caro.",
                    diagram: `@startuml
class Editor { +setText(); +getText(); +save(); +restore() }
class Memento { +getState() }
class History { +push(); +pop() }

Editor --> Memento
History o--> Memento
@enduml`
                },
                { 
                    name: "Observer", 
                    icon: "üëÄ",
                    problem: "Como notificar objetos sobre mudan√ßas em outro objeto?",
                    solution: "Define uma depend√™ncia um-para-muitos entre objetos, de modo que quando um objeto muda de estado, todos os seus dependentes s√£o notificados e atualizados automaticamente.",
                    analogy: {
                        title: "Sistema de Assinatura de Not√≠cias",
                        description: "Os leitores se inscrevem em um jornal para receber as √∫ltimas edi√ß√µes. Quando uma nova edi√ß√£o √© publicada, todos os assinantes s√£o automaticamente notificados."
                    },
                    structure: "Subject (mant√©m observadores), ConcreteSubject (notifica observadores), Observer (interface de atualiza√ß√£o), ConcreteObserver (reage a mudan√ßas).",
                    scenario: "Sistema de monitoramento de a√ß√µes na bolsa de valores que atualiza m√∫ltiplas telas quando os pre√ßos mudam.",
                    benefits: "Acoplamento abstrato entre subject e observer, suporte para comunica√ß√£o broadcast, notifica√ß√µes imprevis√≠veis.",
                    diagram: `@startuml
interface Observer {
  +update()
}
class Newsletter {
  +subscribe()
  +unsubscribe()
  +publish()
}
class UserObserver {
  +name
  +inbox
  +update()
}

Observer <|.. UserObserver
Newsletter --> Observer
@enduml`
                },
                { 
                    name: "State", 
                    icon: "üîÑ",
                    problem: "Como alterar o comportamento de um objeto quando seu estado muda?",
                    solution: "Permite que um objeto altere seu comportamento quando seu estado interno muda. O objeto parecer√° ter mudado de classe.",
                    analogy: {
                        title: "Sem√°foro",
                        description: "Um sem√°foro muda seu comportamento (vermelho=parar, amarelo=aten√ß√£o, verde=seguir) conforme seu estado atual, mas a interface (as luzes) permanece a mesma."
                    },
                    structure: "Context (mant√©m estado atual), State (interface de estado), ConcreteState (implementa comportamento para um estado).",
                    scenario: "Player de m√≠dia que se comporta diferentemente quando est√° reproduzindo, pausado ou parado.",
                    benefits: "Localiza o comportamento espec√≠fico de estado, torna expl√≠citas as transi√ß√µes de estado, objetos State podem ser compartilhados.",
                    diagram: `@startuml
interface PlayerState { +play(); +pause() }
class PlayingState
class PausedState
class Player { -state: PlayerState; +play(); +pause() }

PlayerState <|.. PlayingState
PlayerState <|.. PausedState
Player --> PlayerState
@enduml`
                },
                { 
                    name: "Strategy", 
                    icon: "üéØ",
                    problem: "Como definir uma fam√≠lia de algoritmos e torn√°-los intercambi√°veis?",
                    solution: "Define uma fam√≠lia de algoritmos, encapsula cada um e os torna intercambi√°veis. O Strategy permite que o algoritmo varie independentemente dos clientes que o usam.",
                    analogy: {
                        title: "Meios de Transporte",
                        description: "Para ir do ponto A ao ponto B, voc√™ pode escolher diferentes estrat√©gias: carro, √¥nibus, bicicleta, a p√©. O objetivo √© o mesmo, mas a implementa√ß√£o e caracter√≠sticas de cada meio variam."
                    },
                    structure: "Strategy (interface do algoritmo), ConcreteStrategy (implementa algoritmo), Context (usa Strategy).",
                    scenario: "Sistema de pagamento que suporta diferentes m√©todos (cart√£o, PayPal, boleto) com a mesma interface.",
                    benefits: "Fam√≠lias de algoritmos relacionados, alternativa √† heran√ßa, elimina declara√ß√µes condicionais.",
                    diagram: `@startuml
interface PricingStrategy {
  +calculate()
}
class RegularPricing
class BlackFridayPricing
class VipPricing

PricingStrategy <|.. RegularPricing
PricingStrategy <|.. BlackFridayPricing
PricingStrategy <|.. VipPricing

class PricingContext {
  -strategy: PricingStrategy
  +setStrategy()
  +finalPrice()
}
PricingContext --> PricingStrategy
@enduml`
                },
                { 
                    name: "Template Method", 
                    icon: "üìÑ",
                    problem: "Como definir o esqueleto de um algoritmo, deixando subclasses preencherem etapas espec√≠ficas?",
                    solution: "Define o esqueleto de um algoritmo em uma opera√ß√£o, deixando alguns passos para serem definidos pelas subclasses. O Template Method permite que subclasses redefinam certos passos de um algoritmo sem alterar sua estrutura.",
                    analogy: {
                        title: "Receita de Bolo",
                        description: "Uma receita de bolo tem etapas fixas (misturar, assar, decorar), mas cada tipo de bolo (chocolate, baunilha, morango) tem ingredientes diferentes na etapa de mistura."
                    },
                    structure: "AbstractClass (define template method e m√©todos abstratos), ConcreteClass (implementa m√©todos abstratos).",
                    scenario: "Processamento de dados onde o fluxo √© o mesmo (normalizar, processar, formatar), mas cada formato (CSV, JSON, XML) tem implementa√ß√£o diferente.",
                    benefits: "Reutiliza√ß√£o de c√≥digo, controle de estrutura do algoritmo, facilita extens√£o.",
                    diagram: `@startuml
abstract class DataExporter {
  +export()
  #normalize()
  #format()
  #wrap()
}
class CSVExporter
class JSONExporter

DataExporter <|-- CSVExporter
DataExporter <|-- JSONExporter
@enduml`
                },
                { 
                    name: "Visitor", 
                    icon: "üë§",
                    problem: "Como definir novas opera√ß√µes sobre uma estrutura de objetos sem alterar as classes?",
                    solution: "Representa uma opera√ß√£o a ser executada nos elementos de uma estrutura de objetos. O Visitor permite definir uma nova opera√ß√£o sem alterar as classes dos elementos sobre os quais opera.",
                    analogy: {
                        title: "M√©dico Visitando Pacientes",
                        description: "Um m√©dico visita diferentes pacientes (crian√ßas, adultos, idosos) em um hospital. Cada tipo de paciente tem caracter√≠sticas diferentes, mas o m√©dico aplica o mesmo processo de exame adaptado a cada um."
                    },
                    structure: "Visitor (interface com m√©todos visit), ConcreteVisitor (implementa opera√ß√µes), Element (aceita visitor), ConcreteElement (implementa accept).",
                    scenario: "Compilador que precisa aplicar diferentes an√°lises (sint√°tica, sem√¢ntica, otimiza√ß√£o) sobre uma √°rvore de sintaxe abstrata (AST).",
                    benefits: "F√°cil adicionar novas opera√ß√µes, separa algoritmos das estruturas de dados, permite acumular estado durante a travessia.",
                    diagram: `@startuml
interface Visitor { +visitNumber(); +visitAdd() }
interface Node { +accept() }
class NumberNode { +value }
class AddNode { +left; +right }
class EvalVisitor

Node <|.. NumberNode
Node <|.. AddNode
Visitor <|.. EvalVisitor
NumberNode --> Visitor : accept
AddNode --> Visitor : accept
@enduml`
                }
            ]
        };

        // Inicializa√ß√£o da aplica√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar com a categoria Criacional
            loadCategory('creational');
            
            // Adicionar event listeners para as categorias
            document.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', function() {
                    // Remover classe active de todas as categorias
                    document.querySelectorAll('.category-item').forEach(i => {
                        i.classList.remove('active');
                    });
                    
                    // Adicionar classe active √† categoria clicada
                    this.classList.add('active');
                    
                    // Carregar a categoria selecionada
                    const category = this.getAttribute('data-category');
                    loadCategory(category);
                });
            });
            
            // Configurar o modal
            const modal = document.getElementById('pattern-modal');
            const closeModal = document.getElementById('close-modal');
            
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Configurar o toggle de tema
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-theme');
                
                // Salvar prefer√™ncia no localStorage
                if (document.body.classList.contains('dark-theme')) {
                    localStorage.setItem('theme', 'dark');
                } else {
                    localStorage.setItem('theme', 'light');
                }
            });
            
            // Verificar prefer√™ncia salva
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
        });

        // Fun√ß√£o para carregar uma categoria
        function loadCategory(category) {
            const patterns = patternsData[category];
            const container = document.getElementById('patterns-container');
            const categoryTitle = document.getElementById('current-category');
            
            // Atualizar t√≠tulo da categoria
            let categoryName = '';
            switch(category) {
                case 'creational': categoryName = 'Criacionais'; break;
                case 'structural': categoryName = 'Estruturais'; break;
                case 'behavioral': categoryName = 'Comportamentais'; break;
            }
            categoryTitle.textContent = categoryName;
            
            // Limpar container
            container.innerHTML = '';
            
            // Adicionar padr√µes ao container
            patterns.forEach(pattern => {
                const patternCard = document.createElement('div');
                patternCard.className = 'pattern-card';
                patternCard.setAttribute('data-pattern', pattern.name);
                
                patternCard.innerHTML = `
                    <div class="pattern-icon">${pattern.icon}</div>
                    <div class="pattern-name">${pattern.name}</div>
                    <div class="pattern-category">${categoryName}</div>
                `;
                
                patternCard.addEventListener('click', function() {
                    // Remover classe active de todos os padr√µes
                    document.querySelectorAll('.pattern-card').forEach(card => {
                        card.classList.remove('active');
                    });
                    
                    // Adicionar classe active ao padr√£o clicado
                    this.classList.add('active');
                    
                    // Mostrar explica√ß√£o do padr√£o no modal
                    showPatternModal(pattern, categoryName);
                });
                
                container.appendChild(patternCard);
            });
        }

        // Fun√ß√£o para mostrar o modal com a explica√ß√£o do padr√£o
        function showPatternModal(pattern, categoryName) {
            const modal = document.getElementById('pattern-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalIcon = document.getElementById('modal-icon');
            const modalCategory = document.getElementById('modal-category');
            const modalContent = document.getElementById('modal-content');
            
            // Atualizar informa√ß√µes b√°sicas do modal
            modalTitle.textContent = pattern.name;
            modalIcon.textContent = pattern.icon;
            modalCategory.textContent = `Padr√£o ${categoryName}`;
            
            // Criar ID √∫nico para o container do diagrama
            const diagramId = 'diagram-' + Date.now();
            
            // Construir conte√∫do do modal
            modalContent.innerHTML = `
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-question-circle"></i> Problema Resolvido</h3>
                    <p class="section-content">${pattern.problem}</p>
                </div>
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-lightbulb"></i> Solu√ß√£o Proposta</h3>
                    <p class="section-content">${pattern.solution}</p>
                </div>
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-brain"></i> Analogia do Mundo Real</h3>
                    <div class="analogy">
                        <div class="analogy-title">${pattern.analogy.title}</div>
                        <p>${pattern.analogy.description}</p>
                    </div>
                </div>
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-sitemap"></i> Estrutura do Padr√£o</h3>
                    <p class="section-content">${pattern.structure}</p>
                </div>
                ${pattern.diagram ? `
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-project-diagram"></i> Diagrama UML</h3>
                    <div class="diagram-container" id="${diagramId}"></div>
                </div>
                ` : ''}
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-laptop-code"></i> Cen√°rio de Uso</h3>
                    <p class="section-content">${pattern.scenario}</p>
                </div>
                ${pattern.benefits ? `
                <div class="explanation-section">
                    <h3 class="section-title"><i class="fas fa-star"></i> Benef√≠cios</h3>
                    <p class="section-content">${pattern.benefits}</p>
                </div>
                ` : ''}
            `;
            
            // Renderizar diagrama se existir
            if (pattern.diagram) {
                setTimeout(() => {
                    renderPlantUML(pattern.diagram, diagramId);
                }, 100);
            }
            
            // Exibir o modal
            modal.style.display = 'flex';
        }
    </script>
</body>
</html>

